var IonicRatingComponent_1;
import { __decorate } from "tslib";
import { Component, EventEmitter, Input, Output } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { IonicRatingService } from './ionic-rating.service';
let IonicRatingComponent = IonicRatingComponent_1 = class IonicRatingComponent {
    constructor(ionicRatingService) {
        this.ionicRatingService = ionicRatingService;
        this.iconsArray = [];
        this.ratingChanged = new EventEmitter();
        this.readonly = 'false';
        this.activeColor = '#488aff';
        this.defaultColor = '#aaaaaa';
        this.activeIcon = 'star';
        this.defaultIcon = 'star-outline';
        this.halfIcon = 'star-half';
        this.halfStar = 'false';
        this.maxRating = 5;
        this.fontSize = '28px';
        this.eventInfo = (() => {
            const id = new Date().getTime();
            const topic = `star-rating:${id}:changed`;
            return {
                topic,
            };
        })();
        this.Math = Math;
        this.parseFloat = parseFloat;
    }
    set rating(val) {
        this._rating = val;
        if (this.onChange) {
            this.onChange(val);
        }
    }
    ngOnInit() {
        this.rating = this.rating || 3; //default after input`s initialization
        for (let i = 0; i < this.maxRating; i++) {
            this.iconsArray.push(i);
        }
    }
    writeValue(obj) {
        this.rating = obj;
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    setDisabledState(isDisabled) {
        this.readonly = isDisabled ? "true" : "false";
    }
    get rating() {
        return this._rating;
    }
    changeRating(event) {
        if (this.readonly && this.readonly === 'true')
            return;
        // event is different for firefox and chrome
        let id = event.target.id ? parseInt(event.target.id) : parseInt(event.target.parentElement.id);
        if (this.halfStar && this.halfStar === 'true') {
            this.rating = ((this.rating - id > 0) && (this.rating - id <= 0.5)) ? id + 1 : id + .5;
        }
        else {
            this.rating = id + 1;
        }
        // subscribe this event to get the changed value in your parent compoanent
        this.ionicRatingService.publishStartRatingChanged(this.rating);
        this.ionicRatingService.publishTopic(this.eventInfo.topic, this.rating);
        // unique event
        this.ratingChanged.emit(this.rating);
    }
};
IonicRatingComponent.ctorParameters = () => [
    { type: IonicRatingService }
];
__decorate([
    Output()
], IonicRatingComponent.prototype, "ratingChanged", void 0);
__decorate([
    Input()
], IonicRatingComponent.prototype, "readonly", void 0);
__decorate([
    Input()
], IonicRatingComponent.prototype, "activeColor", void 0);
__decorate([
    Input()
], IonicRatingComponent.prototype, "defaultColor", void 0);
__decorate([
    Input()
], IonicRatingComponent.prototype, "activeIcon", void 0);
__decorate([
    Input()
], IonicRatingComponent.prototype, "defaultIcon", void 0);
__decorate([
    Input()
], IonicRatingComponent.prototype, "halfIcon", void 0);
__decorate([
    Input()
], IonicRatingComponent.prototype, "halfStar", void 0);
__decorate([
    Input()
], IonicRatingComponent.prototype, "maxRating", void 0);
__decorate([
    Input()
], IonicRatingComponent.prototype, "fontSize", void 0);
__decorate([
    Input()
], IonicRatingComponent.prototype, "rating", null);
IonicRatingComponent = IonicRatingComponent_1 = __decorate([
    Component({
        selector: 'ionic-rating-component',
        template: `
    <div class="ionic5-star-rating">
      <ion-button size="large" fill="clear" class="rate-button" [ngStyle]="{'width' : fontSize, 'height' : fontSize}" *ngFor="let index of iconsArray" id="{{index}}" (click)="changeRating($event)">
        <ion-icon  [ngStyle]="{'color':index < this.Math.round(this.parseFloat(rating)) ? activeColor : defaultColor, 'font-size' : fontSize }" name="{{(halfStar ==='true' && (rating - index > 0) && (rating - index <= 0.5)) ? halfIcon : (index < this.Math.round(this.parseFloat(rating))) ? activeIcon : defaultIcon}}"></ion-icon>
      </ion-button>
    </div>
  `,
        providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: IonicRatingComponent_1,
                multi: true,
            },
        ],
        styles: [`
    .rate-button {
            --padding-bottom:0;
            --padding-end:0;
            --padding-start:0;
            --padding-top:0;
    }
  `]
    })
], IonicRatingComponent);
export { IonicRatingComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW9uaWMtcmF0aW5nLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2lvbmljLXJhdGluZy1jb21wb25lbnQvIiwic291cmNlcyI6WyJsaWIvaW9uaWMtcmF0aW5nLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDL0UsT0FBTyxFQUF3QixpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBMEI1RCxJQUFhLG9CQUFvQiw0QkFBakMsTUFBYSxvQkFBb0I7SUF5RS9CLFlBQW9CLGtCQUFzQztRQUF0Qyx1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW9CO1FBbEUxRCxlQUFVLEdBQWEsRUFBRSxDQUFDO1FBRTFCLGtCQUFhLEdBQXlCLElBQUksWUFBWSxFQUFVLENBQUM7UUFFakUsYUFBUSxHQUFXLE9BQU8sQ0FBQztRQUUzQixnQkFBVyxHQUFXLFNBQVMsQ0FBQztRQUVoQyxpQkFBWSxHQUFXLFNBQVMsQ0FBQztRQUVqQyxlQUFVLEdBQVcsTUFBTSxDQUFDO1FBRTVCLGdCQUFXLEdBQVcsY0FBYyxDQUFDO1FBRXJDLGFBQVEsR0FBVyxXQUFXLENBQUM7UUFFL0IsYUFBUSxHQUFXLE9BQU8sQ0FBQztRQUUzQixjQUFTLEdBQVcsQ0FBQyxDQUFDO1FBRXRCLGFBQVEsR0FBVyxNQUFNLENBQUM7UUFnQlYsY0FBUyxHQUFHLENBQUMsR0FBRyxFQUFFO1lBQ2hDLE1BQU0sRUFBRSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDaEMsTUFBTSxLQUFLLEdBQUcsZUFBZSxFQUFFLFVBQVUsQ0FBQztZQUMxQyxPQUFPO2dCQUNMLEtBQUs7YUFDTixDQUFDO1FBQ0osQ0FBQyxDQUFDLEVBQUUsQ0FBQztR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OzBEQUN5QjtBQUVqQztJQURDLEtBQUssRUFBRTt3REFDb0I7QUFFNUI7SUFEQyxLQUFLLEVBQUU7eURBQzZCO0FBRXJDO0lBREMsS0FBSyxFQUFFO3NEQUN1QjtBQUUvQjtJQURDLEtBQUssRUFBRTtzREFDbUI7QUFFM0I7SUFEQyxLQUFLLEVBQUU7dURBQ2M7QUFFdEI7SUFEQyxLQUFLLEVBQUU7c0RBQ2tCO0FBRTFCO0lBREMsS0FBSyxFQUFFO2tEQU1QO0FBbENVLG9CQUFvQjtJQXhCaEMsU0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLHdCQUF3QjtRQUNsQyxRQUFRLEVBQUU7Ozs7OztHQU1UO1FBUUQsU0FBUyxFQUFFO1lBQ1Q7Z0JBQ0UsT0FBTyxFQUFFLGlCQUFpQjtnQkFDMUIsV0FBVyxFQUFFLHNCQUFvQjtnQkFDakMsS0FBSyxFQUFFLElBQUk7YUFDWjtTQUNGO2lCQWRXOzs7Ozs7O0dBT1g7S0FRRixDQUFDO0dBQ1csb0JBQW9CLENBNkZoQztTQTdGWSxvQkFBb0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBJb25pY1JhdGluZ1NlcnZpY2UgfSBmcm9tICcuL2lvbmljLXJhdGluZy5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnaW9uaWMtcmF0aW5nLWNvbXBvbmVudCcsXG4gIHRlbXBsYXRlOiBgXG4gICAgPGRpdiBjbGFzcz1cImlvbmljNS1zdGFyLXJhdGluZ1wiPlxuICAgICAgPGlvbi1idXR0b24gc2l6ZT1cImxhcmdlXCIgZmlsbD1cImNsZWFyXCIgY2xhc3M9XCJyYXRlLWJ1dHRvblwiIFtuZ1N0eWxlXT1cInsnd2lkdGgnIDogZm9udFNpemUsICdoZWlnaHQnIDogZm9udFNpemV9XCIgKm5nRm9yPVwibGV0IGluZGV4IG9mIGljb25zQXJyYXlcIiBpZD1cInt7aW5kZXh9fVwiIChjbGljayk9XCJjaGFuZ2VSYXRpbmcoJGV2ZW50KVwiPlxuICAgICAgICA8aW9uLWljb24gIFtuZ1N0eWxlXT1cInsnY29sb3InOmluZGV4IDwgdGhpcy5NYXRoLnJvdW5kKHRoaXMucGFyc2VGbG9hdChyYXRpbmcpKSA/IGFjdGl2ZUNvbG9yIDogZGVmYXVsdENvbG9yLCAnZm9udC1zaXplJyA6IGZvbnRTaXplIH1cIiBuYW1lPVwie3soaGFsZlN0YXIgPT09J3RydWUnICYmIChyYXRpbmcgLSBpbmRleCA+IDApICYmIChyYXRpbmcgLSBpbmRleCA8PSAwLjUpKSA/IGhhbGZJY29uIDogKGluZGV4IDwgdGhpcy5NYXRoLnJvdW5kKHRoaXMucGFyc2VGbG9hdChyYXRpbmcpKSkgPyBhY3RpdmVJY29uIDogZGVmYXVsdEljb259fVwiPjwvaW9uLWljb24+XG4gICAgICA8L2lvbi1idXR0b24+XG4gICAgPC9kaXY+XG4gIGAsIHN0eWxlczogW2BcbiAgICAucmF0ZS1idXR0b24ge1xuICAgICAgICAgICAgLS1wYWRkaW5nLWJvdHRvbTowO1xuICAgICAgICAgICAgLS1wYWRkaW5nLWVuZDowO1xuICAgICAgICAgICAgLS1wYWRkaW5nLXN0YXJ0OjA7XG4gICAgICAgICAgICAtLXBhZGRpbmctdG9wOjA7XG4gICAgfVxuICBgXSxcbiAgcHJvdmlkZXJzOiBbXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICB1c2VFeGlzdGluZzogSW9uaWNSYXRpbmdDb21wb25lbnQsXG4gICAgICBtdWx0aTogdHJ1ZSxcbiAgICB9LFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBJb25pY1JhdGluZ0NvbXBvbmVudCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBPbkluaXQge1xuICBwcml2YXRlIF9yYXRpbmc6IG51bWJlcjtcbiAgcHJpdmF0ZSBvbkNoYW5nZTogYW55O1xuICBwcml2YXRlIG9uVG91Y2hlZDogYW55O1xuICBwdWJsaWMgZGlzYWJsZWQ6IGJvb2xlYW47XG4gIE1hdGg6IGFueTtcbiAgcGFyc2VGbG9hdDogYW55O1xuICBpY29uc0FycmF5OiBudW1iZXJbXSA9IFtdO1xuICBAT3V0cHV0KClcbiAgcmF0aW5nQ2hhbmdlZDogRXZlbnRFbWl0dGVyPG51bWJlcj4gPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlcj4oKTtcbiAgQElucHV0KClcbiAgcmVhZG9ubHk6IHN0cmluZyA9ICdmYWxzZSc7XG4gIEBJbnB1dCgpXG4gIGFjdGl2ZUNvbG9yOiBzdHJpbmcgPSAnIzQ4OGFmZic7XG4gIEBJbnB1dCgpXG4gIGRlZmF1bHRDb2xvcjogc3RyaW5nID0gJyNhYWFhYWEnO1xuICBASW5wdXQoKVxuICBhY3RpdmVJY29uOiBzdHJpbmcgPSAnc3Rhcic7XG4gIEBJbnB1dCgpXG4gIGRlZmF1bHRJY29uOiBzdHJpbmcgPSAnc3Rhci1vdXRsaW5lJztcbiAgQElucHV0KClcbiAgaGFsZkljb246IHN0cmluZyA9ICdzdGFyLWhhbGYnO1xuICBASW5wdXQoKVxuICBoYWxmU3Rhcjogc3RyaW5nID0gJ2ZhbHNlJztcbiAgQElucHV0KClcbiAgbWF4UmF0aW5nOiBudW1iZXIgPSA1O1xuICBASW5wdXQoKVxuICBmb250U2l6ZTogc3RyaW5nID0gJzI4cHgnO1xuICBASW5wdXQoKVxuICBwdWJsaWMgc2V0IHJhdGluZyh2YWw6IG51bWJlcikge1xuICAgIHRoaXMuX3JhdGluZyA9IHZhbDtcbiAgICBpZiAodGhpcy5vbkNoYW5nZSkge1xuICAgICAgdGhpcy5vbkNoYW5nZSh2YWwpO1xuICAgIH1cbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMucmF0aW5nID0gdGhpcy5yYXRpbmcgfHwgMzsgLy9kZWZhdWx0IGFmdGVyIGlucHV0YHMgaW5pdGlhbGl6YXRpb25cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWF4UmF0aW5nOyBpKyspIHtcbiAgICAgIHRoaXMuaWNvbnNBcnJheS5wdXNoKGkpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBldmVudEluZm8gPSAoKCkgPT4ge1xuICAgIGNvbnN0IGlkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgY29uc3QgdG9waWMgPSBgc3Rhci1yYXRpbmc6JHtpZH06Y2hhbmdlZGA7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvcGljLFxuICAgIH07XG4gIH0pKCk7XG5cbiAgd3JpdGVWYWx1ZShvYmo6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMucmF0aW5nID0gb2JqO1xuICB9XG5cbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICB9XG5cbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25Ub3VjaGVkID0gZm47XG4gIH1cblxuICBzZXREaXNhYmxlZFN0YXRlPyhpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5yZWFkb25seSA9IGlzRGlzYWJsZWQgPyBcInRydWVcIiA6IFwiZmFsc2VcIjtcbiAgfVxuXG5cbiAgcHVibGljIGdldCByYXRpbmcoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fcmF0aW5nO1xuICB9XG5cblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGlvbmljUmF0aW5nU2VydmljZTogSW9uaWNSYXRpbmdTZXJ2aWNlKSB7XG4gICAgdGhpcy5NYXRoID0gTWF0aDtcbiAgICB0aGlzLnBhcnNlRmxvYXQgPSBwYXJzZUZsb2F0O1xuICB9XG5cbiAgY2hhbmdlUmF0aW5nKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMucmVhZG9ubHkgJiYgdGhpcy5yZWFkb25seSA9PT0gJ3RydWUnKSByZXR1cm47XG4gICAgLy8gZXZlbnQgaXMgZGlmZmVyZW50IGZvciBmaXJlZm94IGFuZCBjaHJvbWVcbiAgICBsZXQgaWQgPSBldmVudC50YXJnZXQuaWQgPyBwYXJzZUludChldmVudC50YXJnZXQuaWQpIDogcGFyc2VJbnQoZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuaWQpO1xuICAgIGlmICh0aGlzLmhhbGZTdGFyICYmIHRoaXMuaGFsZlN0YXIgPT09ICd0cnVlJykge1xuICAgICAgdGhpcy5yYXRpbmcgPSAoKHRoaXMucmF0aW5nIC0gaWQgPiAwKSAmJiAodGhpcy5yYXRpbmcgLSBpZCA8PSAwLjUpKSA/IGlkICsgMSA6IGlkICsgLjU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmF0aW5nID0gaWQgKyAxO1xuICAgIH1cbiAgICAvLyBzdWJzY3JpYmUgdGhpcyBldmVudCB0byBnZXQgdGhlIGNoYW5nZWQgdmFsdWUgaW4geW91ciBwYXJlbnQgY29tcG9hbmVudFxuICAgIHRoaXMuaW9uaWNSYXRpbmdTZXJ2aWNlLnB1Ymxpc2hTdGFydFJhdGluZ0NoYW5nZWQodGhpcy5yYXRpbmcpO1xuICAgIHRoaXMuaW9uaWNSYXRpbmdTZXJ2aWNlLnB1Ymxpc2hUb3BpYyh0aGlzLmV2ZW50SW5mby50b3BpYywgdGhpcy5yYXRpbmcpO1xuICAgIC8vIHVuaXF1ZSBldmVudFxuICAgIHRoaXMucmF0aW5nQ2hhbmdlZC5lbWl0KHRoaXMucmF0aW5nKTtcbiAgfVxufVxuIl19